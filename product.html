<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S9VTRZY3XV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-S9VTRZY3XV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Shagun Saree Baran</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="gallery-styles.css">
    <link rel="stylesheet" href="color-variants.css">
    <link rel="stylesheet" href="product-mobile-optimized.css">
    <link rel="stylesheet" href="footer-mobile.css">
    <link rel="stylesheet" href="footer-mobile-optimized.css">
    <link rel="stylesheet" href="share-styles.css">
    <link rel="stylesheet" href="product-details-tabs.css">
    <link rel="stylesheet" href="image-sizing-fix.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <a href="index.html" class="logo-link">
                    <div class="logo-container">
                        <span class="logo-icon">S</span>
                        <span class="logo-text">Shagun Saree</span>
                    </div>
                </a>
            </div>

            <div class="nav-actions">
                <a href="cart.html" class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
                <button class="login-btn">Login</button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="product-main">
        <div class="container">
            <!-- Breadcrumb -->
            <nav class="breadcrumb">
                <a href="index.html">Home</a> / 
                <a href="collections.html">Collections</a> / 
                <span>Product Details</span>
            </nav>

            <!-- Product Details -->
            <div class="product-details">
                <!-- Product Images -->
                <div class="product-images">
                    <div class="main-image-container">
                        <img src="" alt="" id="mainImage" class="main-image">
                    </div>
                    <div class="thumbnail-images" id="thumbnailImages">
                        <!-- Thumbnails will be loaded dynamically -->
                    </div>
                </div>

                <!-- Product Info -->
                <div class="product-info">
                    <div class="product-header">
                        <h1 id="productTitle">Product Title</h1>
                        <button class="share-btn-title" id="shareBtn" onclick="openShareModal()">
                            <i class="fas fa-share"></i>
                            Share
                        </button>
                    </div>
                    


                    <div class="product-price">
                        <span class="current-price" id="currentPrice">₹0</span>
                        <span class="original-price" id="originalPrice">₹0</span>
                        <span class="discount" id="discount">0% OFF</span>
                    </div>

                    <div class="product-description" id="productDescription">
                        Product description will be loaded here...
                    </div>

                    <!-- Stock Status -->
                    <div class="stock-status" id="stockStatus" style="margin: 15px 0; padding: 10px; border-radius: 5px;">
                        <!-- Stock info will be loaded dynamically -->
                    </div>

                    <!-- Color Variants -->
                    <div class="color-variants" id="colorVariants" style="display: none;">
                        <h4>Available Colors</h4>
                        <div class="variant-swatches" id="variantSwatches">
                            <!-- Color variant swatches will be loaded dynamically -->
                        </div>
                    </div>

                    <!-- Color Selection -->
                    <div class="product-options">
                        <div class="option-group">
                            <h4>Color</h4>
                            <div class="color-options" id="colorOptions">
                                <!-- Color options will be loaded dynamically -->
                            </div>
                        </div>


                    </div>

                    <!-- Action Buttons -->
                    <div class="product-actions">
                        <button class="add-to-cart-btn" id="addToCartBtn">
                            <i class="fas fa-shopping-cart"></i>
                            Add to Cart
                        </button>
                        <button class="buy-now-btn" id="buyNowBtn">
                            <i class="fas fa-bolt"></i>
                            Buy Now
                        </button>
                    </div>

                    <!-- Product Highlights -->
                    <div class="product-highlights">
                        <h4>Product Highlights</h4>
                        <ul id="productHighlights">
                            <!-- Highlights will be loaded dynamically -->
                        </ul>
                    </div>

                    <!-- Product Details Tabs -->
                    <div class="product-tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="details">Details</button>
                            <button class="tab-btn" data-tab="specifications">Specifications</button>
                        </div>
                        
                        <div class="tab-content">
                            <div class="tab-pane active" id="details">
                                <div class="design-details" id="designDetails">
                                    <h4>Design Details</h4>
                                    <div class="details-list" id="designDetailsList">
                                        <!-- Design details will be loaded dynamically -->
                                    </div>
                                </div>
                                <div class="blouse-info" id="blouseInfo">
                                    <!-- Blouse information will be loaded dynamically -->
                                </div>
                            </div>
                            
                            <div class="tab-pane" id="specifications">
                                <div class="specs-grid" id="specificationsGrid">
                                    <!-- Specifications will be loaded dynamically -->
                                </div>
                                <div class="complete-look" id="completeLook">
                                    <!-- Complete the look info will be loaded dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Delivery Info -->
                    <div class="delivery-info">
                        <div class="delivery-item">
                            <i class="fas fa-truck"></i>
                            <div>
                                <strong>Free Delivery</strong>
                                <p>On orders above ₹999</p>
                            </div>
                        </div>

                        <div class="delivery-item">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <strong>Secure Payment</strong>
                                <p>100% secure checkout</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Shagun Saree Baran</h3>
                    <p>Your trusted destination for premium Indian sarees. Quality, tradition, and elegance in every piece.</p>
                </div>
                <div class="footer-sections-row">
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <div class="footer-links">
                            <a href="index.html">Home</a>
                            <a href="collections.html">Collections</a>
                            <a href="cart.html">Cart</a>
                            <a href="contact.html">Contact Us</a>
                        </div>
                    </div>
                    <div class="footer-section">
                        <h4>Contact Info</h4>
                        <div class="footer-contact">
                            <div><i class="fas fa-envelope"></i><a href="mailto:shagunsaree60@gmail.com">shagunsaree60@gmail.com</a></div>
                            <div><i class="fas fa-phone"></i>+91 9636788945</div>
                            <div><i class="fas fa-map-marker-alt"></i>Krishna Colony, Baran, Rajasthan</div>
                        </div>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="footer-social">
                        <a href="https://www.instagram.com/shagun_sareebaran?igsh=cjJoZXozejhhZ2Nh" target="_blank"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <!-- Feedback Section -->
            <div class="footer-feedback">
                <p class="feedback-message">
                    The website is in early stages. There may be minor bugs. We appreciate your feedback to help us improve!
                </p>
                <button class="feedback-btn" onclick="openFeedbackModal()">
                    <i class="fas fa-comment-dots"></i>
                    Give Feedback
                </button>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Shagun Saree Baran. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Share Modal -->
    <div id="shareModal" class="share-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share this Product</h3>
                <button class="modal-close" onclick="closeShareModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="share-options">
                    <button class="share-option" onclick="shareToWhatsApp()">
                        <i class="fab fa-whatsapp"></i>
                        WhatsApp
                    </button>
                    <button class="share-option" onclick="shareToFacebook()">
                        <i class="fab fa-facebook"></i>
                        Facebook
                    </button>
                    <button class="share-option" onclick="shareToTwitter()">
                        <i class="fab fa-twitter"></i>
                        Twitter
                    </button>
                    <button class="share-option" onclick="shareToInstagram()">
                        <i class="fab fa-instagram"></i>
                        Instagram
                    </button>
                    <button class="share-option" onclick="shareToTelegram()">
                        <i class="fab fa-telegram"></i>
                        Telegram
                    </button>
                </div>
                <div class="copy-link-section">
                    <div class="copy-link-container">
                        <input type="text" id="productLink" readonly>
                        <button class="copy-btn" onclick="copyProductLink()">
                            <i class="fas fa-copy"></i>
                            Copy
                        </button>
                    </div>
                    <p class="copy-success" id="copySuccess" style="display: none;">Link copied to clipboard!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="feedback-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Your Feedback</h3>
                <button class="modal-close" onclick="closeFeedbackModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="feedbackForm">
                    <textarea 
                        id="feedbackText" 
                        placeholder="Please share your thoughts, suggestions, or report any bugs you've encountered. Your feedback helps us improve!"
                        required
                    ></textarea>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i>
                        Submit Feedback
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script src="cart-count-fix.js"></script>
    <script>
        // Load product details when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            const selectedColor = urlParams.get('color');
            
            if (productId) {
                // Initialize Supabase
                const SUPABASE_URL = 'https://jstvadizuzvwhabtfhfs.supabase.co';
                const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzdHZhZGl6dXp2d2hhYnRmaGZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NjI3NjAsImV4cCI6MjA3MjIzODc2MH0.6btNpJfUh6Fd5PfoivIvu-f31Fj5IXl1vxBLsHz5ISw';
                window.supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                
                await loadProductDetails(productId, selectedColor);
            } else {
                window.location.href = 'collections.html';
            }
        });
        
        async function loadProductDetails(productId, selectedColor) {
            try {
                console.log('Loading product with ID:', productId);
                
                // Try Supabase first
                const { data, error } = await supabase
                    .from('products')
                    .select('*')
                    .eq('id', productId)
                    .single();
                
                if (error || !data) {
                    console.log('Supabase error or no data, using fallback:', error);
                    // Use fallback products
                    const fallbackProducts = [
                        {
                            id: '1',
                            name: "Silk Banarasi Saree",
                            price: 15000,
                            originalPrice: 18000,
                            image: "https://via.placeholder.com/500x600/FF6B6B/FFFFFF?text=Silk+Banarasi",
                            images: [
                                "https://via.placeholder.com/500x600/FF6B6B/FFFFFF?text=Silk+Banarasi+1",
                                "https://via.placeholder.com/500x600/FF4444/FFFFFF?text=Silk+Banarasi+2",
                                "https://via.placeholder.com/500x600/FF8888/FFFFFF?text=Silk+Banarasi+3"
                            ],
                            category: "silk",
                            rating: 4.8,
                            description: "Exquisite Banarasi silk saree with intricate zari work. Perfect for weddings and special occasions.",
                            colors: ["Red", "Green", "Blue"],
                            sizes: ["Free Size"],
                            fabric: "Silk",
                            reviews: 156
                        },
                        {
                            id: '2',
                            name: "Cotton Handloom Saree",
                            price: 2500,
                            originalPrice: 3000,
                            image: "https://via.placeholder.com/500x600/4ECDC4/FFFFFF?text=Cotton+Handloom",
                            category: "cotton",
                            rating: 4.5,
                            description: "Comfortable cotton handloom saree for daily wear. Breathable and elegant.",
                            colors: ["White", "Beige", "Pink"],
                            sizes: ["Free Size"],
                            fabric: "Cotton",
                            reviews: 89
                        },
                        {
                            id: '3',
                            name: "Designer Georgette Saree",
                            price: 8000,
                            originalPrice: 10000,
                            image: "https://via.placeholder.com/500x600/45B7D1/FFFFFF?text=Designer+Georgette",
                            category: "designer",
                            rating: 4.7,
                            description: "Elegant designer georgette saree with modern aesthetics and traditional charm.",
                            colors: ["Purple", "Teal", "Maroon"],
                            sizes: ["Free Size"],
                            fabric: "Georgette",
                            reviews: 203
                        }
                    ];
                    
                    const product = fallbackProducts.find(p => p.id === productId);
                    if (!product) {
                        alert('Product not found!');
                        window.location.href = 'collections.html';
                        return;
                    }
                    
                    displayProductDetails(product, selectedColor);
                    setupProductActions(product);
                    return;
                }
                
                const product = {
                    id: data.id,
                    name: data.name,
                    price: data.price,
                    originalPrice: data.originalPrice || data.original_price,
                    image: data.images && data.images.length > 0 ? data.images[0] : null,
                    images: data.images || [],
                    category: data.category,
                    rating: data.rating || 4.5,
                    description: data.description,
                    colors: data.colors || ['Red', 'Blue', 'Green'],
                    color_variants: data.color_variants || [],
                    sizes: data.sizes || ['Free Size'],
                    fabric: data.fabric,
                    reviews: data.reviews || 50,
                    stock: data.stock || 0,
                    status: data.status || 'active'
                };
                
                displayProductDetails(product, selectedColor);
                setupProductActions(product);
            } catch (error) {
                console.error('Error loading product:', error);
                alert('Error loading product!');
                window.location.href = 'collections.html';
            }
        }
        
        function displayProductDetails(product, selectedColor) {
            document.getElementById('productTitle').textContent = product.name;
            document.getElementById('currentPrice').textContent = `₹${product.price.toLocaleString()}`;
            document.getElementById('originalPrice').textContent = product.originalPrice ? `₹${product.originalPrice.toLocaleString()}` : '';
            document.getElementById('productDescription').textContent = product.description || 'No description available.';
            
            // Display stock status
            const stockStatus = document.getElementById('stockStatus');
            if (product.stock === 0 || product.status === 'out-of-stock') {
                stockStatus.innerHTML = '<i class="fas fa-times-circle" style="color: #dc3545;"></i> <strong style="color: #dc3545;">Out of Stock</strong>';
                stockStatus.style.backgroundColor = '#f8d7da';
                stockStatus.style.border = '1px solid #f5c6cb';
                stockStatus.style.color = '#721c24';
            } else {
                stockStatus.innerHTML = `<i class="fas fa-check-circle" style="color: #28a745;"></i> <strong style="color: #155724;">In Stock</strong>`;
                stockStatus.style.backgroundColor = '#d4edda';
                stockStatus.style.border = '1px solid #c3e6cb';
                stockStatus.style.color = '#155724';
            }
            
            // Load image gallery
            let imagesToShow = [];
            
            // If a color is selected and color variants exist, use variant images
            if (selectedColor && product.color_variants && product.color_variants.length > 0) {
                const colorVariant = product.color_variants.find(v => v.color === selectedColor);
                if (colorVariant && colorVariant.images && colorVariant.images.length > 0) {
                    imagesToShow = colorVariant.images.map(img => {
                        return img.startsWith('http') ? img : `https://jstvadizuzvwhabtfhfs.supabase.co/storage/v1/object/public/Sarees/${img}`;
                    });
                    // Update product name to include color
                    document.getElementById('productTitle').textContent = `${product.name} - ${selectedColor}`;
                }
            }
            
            // Fallback to main product images if no variant images found
            if (imagesToShow.length === 0) {
                console.log('Product images array:', product.images);
                if (product.images && Array.isArray(product.images) && product.images.length > 0) {
                    imagesToShow = product.images.map(img => {
                        if (!img) return null;
                        return img.startsWith('http') ? img : `https://jstvadizuzvwhabtfhfs.supabase.co/storage/v1/object/public/Sarees/${img}`;
                    }).filter(img => img !== null);
                    console.log('Processed images:', imagesToShow);
                } else if (product.image) {
                    const imageUrl = product.image.startsWith('http') ? product.image : `https://jstvadizuzvwhabtfhfs.supabase.co/storage/v1/object/public/Sarees/${product.image}`;
                    imagesToShow = [imageUrl];
                } else {
                    imagesToShow = [`https://via.placeholder.com/500x600/FF6B6B/FFFFFF?text=${encodeURIComponent(product.name)}`];
                }
            }
            
            // Display image gallery
            displayImageGallery(imagesToShow, product.name);
            
            // Calculate discount
            if (product.originalPrice && product.originalPrice > product.price) {
                const discount = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                document.getElementById('discount').textContent = `${discount}% OFF`;
            }
            
            // Load colors (prioritize color variants if available)
            const colorOptions = document.getElementById('colorOptions');
            let availableColors = [];
            
            if (product.color_variants && product.color_variants.length > 0) {
                availableColors = product.color_variants.map(v => v.color);
            } else if (product.colors && product.colors.length > 0) {
                availableColors = product.colors;
            }
            
            if (availableColors.length > 0) {
                colorOptions.innerHTML = availableColors.map(color => {
                    const isSelected = color === selectedColor ? 'selected' : '';
                    const variant = product.color_variants ? product.color_variants.find(v => v.color === color) : null;
                    const colorCode = variant ? variant.colorCode : getColorCodeFromName(color);
                    const style = colorCode ? `style="background-color: ${colorCode}; color: ${getContrastColor(colorCode)};"` : '';
                    return `<div class="color-option ${isSelected}" data-color="${color}" ${style} onclick="selectColor('${color}')">${color}</div>`;
                }).join('');
            }
            

            
            // Update page title
            document.title = `${product.name} - Shagun Saree Baran`;
        }
        
        function displayImageGallery(images, productName) {
            const mainImage = document.getElementById('mainImage');
            const thumbnailContainer = document.getElementById('thumbnailImages');
            
            // Set main image
            mainImage.src = images[0];
            mainImage.alt = productName;
            
            // Create thumbnails if more than one image
            if (images.length > 1) {
                thumbnailContainer.innerHTML = images.map((img, index) => `
                    <img src="${img}" alt="${productName} ${index + 1}" class="thumbnail" onclick="changeMainImage('${img}')">
                `).join('');
                thumbnailContainer.style.display = 'flex';
            } else {
                thumbnailContainer.style.display = 'none';
            }
        }
        
        function changeMainImage(imageUrl) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = imageUrl;
            
            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
                if (thumb.src === imageUrl) {
                    thumb.classList.add('active');
                }
            });
        }
        
        function setupProductActions(product) {
            const addToCartBtn = document.getElementById('addToCartBtn');
            const buyNowBtn = document.getElementById('buyNowBtn');
            
            // Check if product is out of stock
            if (product.stock === 0 || product.status === 'out-of-stock') {
                // Remove buttons completely
                addToCartBtn.remove();
                buyNowBtn.remove();
                return;
            }
            
            // Normal functionality for in-stock products (quantity fixed to 1)
            addToCartBtn.addEventListener('click', function() {
                addProductToCart(product, 1);
            });
            
            buyNowBtn.addEventListener('click', function() {
                buyNowProduct(product, 1);
            });
        }
        
        function addProductToCart(product, quantity) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ ...product, quantity });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
            
            // Show notification
            alert('Added to cart!');
        }
        
        function buyNowProduct(product, quantity) {
            // Check if user is logged in
            const userSession = localStorage.getItem('userSession');
            if (!userSession) {
                alert('Please login to buy now.');
                window.location.href = 'auth.html';
                return;
            }
            
            // Store buy now item separately (don't add to cart)
            const buyNowItem = { ...product, quantity };
            localStorage.setItem('buyNowItem', JSON.stringify(buyNowItem));
            
            // Go directly to address page with buy now flag
            window.location.href = 'address.html?buyNow=true';
        }
        
        function selectColor(color) {
            // Update URL with selected color
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            window.location.href = `product.html?id=${productId}&color=${encodeURIComponent(color)}`;
        }
        
        function getColorCodeFromName(colorName) {
            const colorMap = {
                'red': '#FF0000', 'blue': '#0000FF', 'green': '#008000', 'yellow': '#FFFF00',
                'orange': '#FFA500', 'purple': '#800080', 'pink': '#FFC0CB', 'black': '#000000',
                'white': '#FFFFFF', 'gray': '#808080', 'grey': '#808080', 'brown': '#A52A2A',
                'maroon': '#800000', 'navy': '#000080', 'teal': '#008080', 'olive': '#808000',
                'lime': '#00FF00', 'aqua': '#00FFFF', 'silver': '#C0C0C0', 'gold': '#FFD700',
                'beige': '#F5F5DC', 'cream': '#FFFDD0', 'ivory': '#FFFFF0'
            };
            return colorMap[colorName.toLowerCase()] || '#CCCCCC';
        }
        
        function getContrastColor(hexColor) {
            if (!hexColor || hexColor.length < 7) return '#000000';
            // Convert hex to RGB
            const r = parseInt(hexColor.substr(1, 2), 16);
            const g = parseInt(hexColor.substr(3, 2), 16);
            const b = parseInt(hexColor.substr(5, 2), 16);
            
            // Calculate luminance
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            
            // Return black or white based on luminance
            return luminance > 0.5 ? '#000000' : '#FFFFFF';
        }
        
        // Tab functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tab-btn')) {
                const tabId = e.target.getAttribute('data-tab');
                
                // Remove active class from all tabs and panes
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding pane
                e.target.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            }
        });
        
        // Make changeMainImage globally available
        window.changeMainImage = changeMainImage;
        
        // Share functionality
        function openShareModal() {
            const modal = document.getElementById('shareModal');
            const productLink = document.getElementById('productLink');
            productLink.value = window.location.href;
            modal.style.display = 'flex';
        }
        
        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
        }
        
        function shareToWhatsApp() {
            const productTitle = document.getElementById('productTitle').textContent;
            const productPrice = document.getElementById('currentPrice').textContent;
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Check out this beautiful saree: ${productTitle} - ${productPrice}`);
            window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
        }
        
        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }
        
        function shareToTwitter() {
            const productTitle = document.getElementById('productTitle').textContent;
            const productPrice = document.getElementById('currentPrice').textContent;
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Check out this beautiful saree: ${productTitle} - ${productPrice}`);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }
        
        function shareToInstagram() {
            // Instagram doesn't support direct URL sharing, so copy link and show message
            copyProductLink();
            alert('Link copied! You can paste it in your Instagram story or post.');
        }
        
        function shareToTelegram() {
            const productTitle = document.getElementById('productTitle').textContent;
            const productPrice = document.getElementById('currentPrice').textContent;
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Check out this beautiful saree: ${productTitle} - ${productPrice}`);
            window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank');
        }
        
        function copyProductLink() {
            const productLink = document.getElementById('productLink');
            productLink.select();
            productLink.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(productLink.value).then(() => {
                const copySuccess = document.getElementById('copySuccess');
                copySuccess.style.display = 'block';
                setTimeout(() => {
                    copySuccess.style.display = 'none';
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                document.execCommand('copy');
                const copySuccess = document.getElementById('copySuccess');
                copySuccess.style.display = 'block';
                setTimeout(() => {
                    copySuccess.style.display = 'none';
                }, 2000);
            });
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const shareModal = document.getElementById('shareModal');
            if (event.target === shareModal) {
                closeShareModal();
            }
        }
        
        // Make functions globally available
        window.openShareModal = openShareModal;
        window.closeShareModal = closeShareModal;
        window.shareToWhatsApp = shareToWhatsApp;
        window.shareToFacebook = shareToFacebook;
        window.shareToTwitter = shareToTwitter;
        window.shareToInstagram = shareToInstagram;
        window.shareToTelegram = shareToTelegram;
        window.copyProductLink = copyProductLink;
    </script>
</body>
</html>
